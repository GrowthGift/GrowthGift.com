<template name="userProfile">
  <div class='max-600 padding'>

    <div class='max-300'><img class='img-100' src='{{ data.user.xDisplay.img }}' /></div>
    <div class='center margin-lr'>
      <h2>{{ data.user.profile.name }}</h2>
      <!-- {{#unless data.isSelf}}
      <div class='center margin-tb'>
        {{#if data.isFollowing}}
        <div class='btn btn-warning user-unfollow'>Unfollow</div>
        {{else}}
        <div class='btn btn-primary user-follow'>Follow</div>
        {{/if}}
      </div>
      {{/unless}} -->
    </div>

    {{ #if data.isSelf }}
    {{#autoForm schema="UserProfileSchema" doc=data.user.profile id="userProfileForm" resetOnSuccess=false }}
      {{>afQuickField name="name" }}

      <!-- {{>afQuickField name="image" label="Image URL (to a public image on the Internet)" }} -->
      <label>Image</label>
      {{ #if data.inputOpts.imageVal }}
        <div class='margin-small-b'>
          {{>afQuickField name="image" type="text" label=false readonly=true value=data.inputOpts.imageVal }}
        </div>
      {{ /if }}
      {{> lmImagePicker opts=data.inputOpts.optsImagePicker }}

      {{>afQuickField name="gender" type="select" options=data.inputOpts.genderOpts }}

      <div class='margin-large-t flexbox'>
        <div class='flex1'>&nbsp;</div>
        <div>
          <button type="submit" class="btn btn-primary">Save</button>
        </div>
      </div>
    {{/autoForm}}
    {{ /if }}

  </div>
  
</template>