<template name="gameInvite">
  {{> msNavSecondary nav=nav }}

  {{#if data._xNotFound }}
  <div class='padding center'>Challenge either is still loading or does not exist. <a href='{{ data._xHref }}'>Return to My Challenges.</a></div>
  {{else}}
  <div class='padding max-600'>
    <a class='a-block h2 center margin-b' href='{{ data.gameLink }}'>{{ data.game.title }}</a>

    {{#if data.gameState.gameEnded }}
    <div class='center'>
      <div>Challenge over.</div>
      <div>Time to join (or create) a new challenge!</div>
    </div>
    {{else}}

      {{ #if data.nav.pledge }}
      {{ >gamePledge gameSlug=../gameSlug game=../helperData.game gameRule=../helperData.gameRule gameUser=../helperData.gameUser userGame=../helperData.userGame user=../helperData.user }}
      {{ /if }}

      {{ #if data.nav.buddy }}
      <div class='margin-tb'>
        {{ >gameInviteBuddy gameSlug=../gameSlug game=../helperData.game gameUser=../helperData.gameUser gameMainAction=../helperData.gameRule.mainAction }}
      </div>
      {{ /if }}

      {{ #if data.nav.reach }}
      <div class='margin-tb'>
        {{ >gameInviteReach gameSlug=../gameSlug game=../helperData.game user=../helperData.user gameMainAction=../helperData.gameRule.mainAction }}
      </div>
      {{ /if }}

    {{/if}}

  </div>
  {{/if}}
</template>