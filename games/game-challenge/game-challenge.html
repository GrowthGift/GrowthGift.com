<template name="gameChallenge">
  {{#if data._xNotFound }}
  <div class='padding center'>Game either is still loading or does not exist. <a href='{{ data._xHref }}'>Return to My Games.</a></div>
  {{else}}
  <div class='padding max-600'>

    <a class='a-block h2 center margin-b' href='{{ data.gameLink }}'>{{ data.game.title }}</a>

    <div class='margin-xlarge-b'>
      <h4 class='center'>Add a Challenge Completion</h4>
      {{#if data.privileges.addChallenge }}
        {{#autoForm schema="GameChallengeSchema" id='gameChallengeForm' validation="blur" }}
          {{>afQuickField name="title" }}
          {{>afQuickField name="description" type="textarea" }}

          <!-- Hidden and auto set for now -->
          {{>afQuickField name="privacy" type="hidden" value="private" }}
          
          <div class='margin-large-t flexbox'>
            <div class='flex1'>&nbsp;</div>
            <div>
              <button type="submit" class="btn btn-primary">Mark Complete</button>
            </div>
          </div>
        {{/autoForm}}
      {{else}}
        <div class='center'>{{ data.privileges.addChallengeMessage }}</div>
      {{/if}}
    </div>

    <div>
      <h4 class='center'>Completed Challenges</h4>
      {{#each data.challenges}}
        <div class='margin-b'>
          <div class='flexbox'>
            <div class='flex1 h4'>{{ title }}</div>
            <div>{{ xDisplay.createdAt }}</div>
          </div>
          <div>{{ description }}</div>
        </div>
      {{/each}}
    </div>
  </div>
  {{/if}}
</template>